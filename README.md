CREATE TABLE KOTAKTCI.VIRTUAL_APAC_TABLE
(
  TXN_DATE              DATE,
  TXN_REF_NO            VARCHAR2(1000 BYTE)     NOT NULL,
  E_COLL_ACC_NO         VARCHAR2(1000 BYTE),
  MASTER_ACC_NO         VARCHAR2(1000 BYTE),
  DEALER_NAME           VARCHAR2(1000 BYTE),
  AMOUNT                NUMBER(20,4),
  BENE_CUST_ACNAME      VARCHAR2(1000 BYTE),
  SEND_CUST_ACNAME      VARCHAR2(1000 BYTE),
  REMITT_INFO           VARCHAR2(1000 BYTE),
  SENDER_ADDRESS        VARCHAR2(1000 BYTE),
  REF1                  VARCHAR2(1000 BYTE),
  REF2                  VARCHAR2(1000 BYTE),
  REF3                  VARCHAR2(1000 BYTE),
  PROCESSED_FLAG        CHAR(1 BYTE)            DEFAULT 'N',
  CREATED_DATE          DATE,
  MODIFIED_DATE         DATE,
  IDEA_TXN_REF_NO       VARCHAR2(1000 BYTE),
  INITIAL_AVAIL_BAL     NUMBER(20,4),
  INITIAL_CUR_BAL       NUMBER(20,4),
  UPDATED_AVAIL_BAL     NUMBER(20,4),
  UPDATED_CUR_BAL       NUMBER(20,4),
  PROC_REMARKS          VARCHAR2(4000 BYTE),
  REMIT_AC_NMBR         VARCHAR2(1000 BYTE),
  PAY_MODE              VARCHAR2(1000 BYTE),
  CMS_TRAN_API_STATUS   VARCHAR2(1 BYTE),
  CMS_TRAN_API_REMARKS  VARCHAR2(1000 BYTE),
  CMS_CREATED_DATE      DATE,
  CMS_REV_API_STATUS    VARCHAR2(1 BYTE),
  CMS_REV_API_REMARKS   VARCHAR2(1000 BYTE),
  CMS_REV_CREATED_DATE  DATE,
  SUPPLEMENTAL LOG GROUP GGS_208324 (TXN_REF_NO) ALWAYS,
  SUPPLEMENTAL LOG DATA (PRIMARY KEY) COLUMNS,
  SUPPLEMENTAL LOG DATA (UNIQUE) COLUMNS,
  SUPPLEMENTAL LOG DATA (FOREIGN KEY) COLUMNS,
  SUPPLEMENTAL LOG DATA (ALL) COLUMNS
)
TABLESPACE CT_CI_DUMMY_PRD
RESULT_CACHE (MODE DEFAULT)
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE INDEX KOTAKTCI.IDX_REF3 ON KOTAKTCI.VIRTUAL_APAC_TABLE
(REF3)
LOGGING
TABLESPACE CT_CI_DUMMY_PRD
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


CREATE INDEX KOTAKTCI.INDX_VIRTUAL_APAC ON KOTAKTCI.VIRTUAL_APAC_TABLE
(MASTER_ACC_NO, PROCESSED_FLAG)
LOGGING
TABLESPACE CT_CI_DUMMY_PRD
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


CREATE UNIQUE INDEX KOTAKTCI.PK_PRIMARY_KEY ON KOTAKTCI.VIRTUAL_APAC_TABLE
(TXN_REF_NO)
LOGGING
TABLESPACE CT_CI_DUMMY_PRD
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


CREATE OR REPLACE SYNONYM SYS.VIRTUAL_APAC_TABLE FOR KOTAKTCI.VIRTUAL_APAC_TABLE;


ALTER TABLE KOTAKTCI.VIRTUAL_APAC_TABLE ADD (
  CONSTRAINT CHK_PROCESS_FLAG
  CHECK (processed_flag in ('N','Y','P','E','X'))
  ENABLE VALIDATE,
  CONSTRAINT PK_PRIMARY_KEY
  PRIMARY KEY
  (TXN_REF_NO)
  USING INDEX KOTAKTCI.PK_PRIMARY_KEY
  ENABLE VALIDATE);

GRANT SELECT ON KOTAKTCI.VIRTUAL_APAC_TABLE TO BOREPORT;

GRANT READ ON KOTAKTCI.VIRTUAL_APAC_TABLE TO CASHMIG;

GRANT SELECT, READ ON KOTAKTCI.VIRTUAL_APAC_TABLE TO CASHSSRS;

GRANT SELECT, UPDATE ON KOTAKTCI.VIRTUAL_APAC_TABLE TO DPATCH;

GRANT SELECT ON KOTAKTCI.VIRTUAL_APAC_TABLE TO EDW;

GRANT ALTER, SELECT ON KOTAKTCI.VIRTUAL_APAC_TABLE TO GGUSER;

GRANT SELECT, READ ON KOTAKTCI.VIRTUAL_APAC_TABLE TO MSAREP;

GRANT SELECT, READ ON KOTAKTCI.VIRTUAL_APAC_TABLE TO MSAREP1;

GRANT SELECT, READ ON KOTAKTCI.VIRTUAL_APAC_TABLE TO SUPPORT;

