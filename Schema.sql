CREATE TABLE VIRTUAL_APAC_TABLE (
    TXN_DATE DATE,
    TXN_REF_NO VARCHAR(1000) NOT NULL,
    E_COLL_ACC_NO VARCHAR(1000),
    MASTER_ACC_NO VARCHAR(1000),
    DEALER_NAME VARCHAR(1000),
    AMOUNT DECIMAL(20,4),
    BENE_CUST_ACNAME VARCHAR(1000),
    SEND_CUST_ACNAME VARCHAR(1000),
    REMITT_INFO VARCHAR(1000),
    SENDER_ADDRESS VARCHAR(1000),
    REF1 VARCHAR(1000),
    REF2 VARCHAR(1000),
    REF3 VARCHAR(1000),
    PROCESSED_FLAG CHAR(1) DEFAULT 'N',
    CREATED_DATE DATE,
    MODIFIED_DATE DATE,
    IDEA_TXN_REF_NO VARCHAR(1000),
    INITIAL_AVAIL_BAL DECIMAL(20,4),
    INITIAL_CUR_BAL DECIMAL(20,4),
    UPDATED_AVAIL_BAL DECIMAL(20,4),
    UPDATED_CUR_BAL DECIMAL(20,4),
    PROC_REMARKS VARCHAR(4000),
    REMIT_AC_NMBR VARCHAR(1000),
    PAY_MODE VARCHAR(1000),
    CMS_TRAN_API_STATUS VARCHAR(1),
    CMS_TRAN_API_REMARKS VARCHAR(1000),
    CMS_CREATED_DATE DATE,
    CMS_REV_API_STATUS VARCHAR(1),
    CMS_REV_API_REMARKS VARCHAR(1000),
    CMS_REV_CREATED_DATE DATE,
    
    CONSTRAINT CHK_PROCESS_FLAG CHECK (PROCESSED_FLAG IN ('N', 'Y', 'P', 'E', 'X')),
    CONSTRAINT PK_PRIMARY_KEY PRIMARY KEY (TXN_REF_NO)
);

-- Create indexes
CREATE INDEX IDX_REF3 ON VIRTUAL_APAC_TABLE (REF3);
CREATE INDEX INDX_VIRTUAL_APAC ON VIRTUAL_APAC_TABLE (MASTER_ACC_NO, PROCESSED_FLAG);
